"use strict";angular.module("app",["templates","ui.router","ngResource","ngSanitize","ngStorage","ngAnimate","angular-loading-bar","rzModule","ui.bootstrap","ui.select","app.tyre","app.disk","app.cart","app.profile","app.shops","app.common"]),angular.module("app").factory("authInterceptor",["$injector",function(e){var t,r,a;return t=e.get("$q"),r=e.get("$rootScope"),a=e.get("SessionService"),{request:function(e){var t;return t=a.getUser(),null!=t.token&&(e.headers.Authorization="Bearer "+t.token),e},responseError:function(e){return 401===e.status&&(a.deleteUser(),r.$state.go("auth.login")),t.reject(e)}}}]),angular.module("app").config(["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$httpProvider","$httpParamSerializerJQLikeProvider","$resourceProvider","appConfig",function(e,t,r,a,o,s,n){r.strictMode(!1),a.interceptors.push("authInterceptor"),a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a.defaults.headers.common.Accept="application/json, text/javascript",a.defaults.headers.common["Content-Type"]="application/json; charset=utf-8",a.defaults.headers.post["X-CSRF-Token"]=n.csrfToken,a.defaults.headers.put["X-CSRF-Token"]=n.csrfToken,a.defaults.headers.delete={"X-CSRF-Token":n.csrfToken},a.defaults.paramSerializer=o.$get(),s.defaults.stripTrailingSlashes=!1,t.otherwise("/"),e.state("auth",{url:"/auth",abstract:!0,template:"<ui-view></ui-view>"}).state("auth.login",{url:"/login",controller:"ctrl.login",templateUrl:"partials/login.html",data:{noLogin:!0}}).state("auth.logout",{url:"/logout",controller:["$scope","SessionService","$state",function(e,t,r){t.deleteUser(),r.go("app.index")}],template:"",data:{noLogin:!0},resolve:{logout_resolve:["User",function(e){return e.logout()}]}}).state("app",{abstract:!0,url:"/",templateUrl:"partials/layout.html"}).state("app.index",{url:"",templateUrl:"partials/catalog.html"})}]),angular.module("app").run(["$rootScope","$state","$stateParams","$sce","SessionService","$window",function(e,t,r,a,o,s){e.$state=t,e.$stateParams=r,e.user=null,e.$on("$stateChangeError",console.log.bind(console)),e.$on("$stateChangeStart",function(e,t,r,a,s){o.checkAccess(e,t,r,a,s)}),e.trustAsHtml=function(e){return a.trustAsHtml(e)},e.$on("$stateChangeSuccess",function(e,t,r){return s.scrollTo(0,0)})}]);